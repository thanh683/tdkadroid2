{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport { createSlice } from \"@reduxjs/toolkit\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nexport var cartSlice = createSlice({\n  name: \"cart\",\n  initialState: {\n    items: []\n  },\n  reducers: {\n    addToCart: function addToCart(state, action) {\n      var item = action.payload.item;\n      var existingItemIndex = state.items.findIndex(function (i) {\n        return i.id === item.id;\n      });\n      if (existingItemIndex === -1) {\n        state.items.push(_objectSpread(_objectSpread({}, item), {}, {\n          count: 1\n        }));\n      } else {\n        state.items[existingItemIndex].count++;\n      }\n      AsyncStorage.setItem('cart', JSON.stringify(state.items));\n    },\n    removeFromCart: function removeFromCart(state, action) {\n      state.items = state.items.filter(function (item) {\n        return item.id !== action.payload.id;\n      });\n      AsyncStorage.removeItem('cart');\n      AsyncStorage.setItem('cart', JSON.stringify(state.items));\n    },\n    increaseCount: function increaseCount(state, action) {\n      state.items = state.items.map(function (item) {\n        if (item.id === action.payload.id) {\n          item.count++;\n        }\n        return item;\n      });\n      AsyncStorage.setItem('cart', JSON.stringify(state.items));\n    },\n    decreaseCount: function decreaseCount(state, action) {\n      state.items = state.items.map(function (item) {\n        if (item.id === action.payload.id && item.count > 1) {\n          item.count--;\n        }\n        return item;\n      });\n      AsyncStorage.setItem('cart', JSON.stringify(state.items));\n    }\n  }\n});\nvar _cartSlice$actions = cartSlice.actions,\n  addToCart = _cartSlice$actions.addToCart,\n  removeFromCart = _cartSlice$actions.removeFromCart,\n  increaseCount = _cartSlice$actions.increaseCount,\n  decreaseCount = _cartSlice$actions.decreaseCount;\nexport { addToCart, removeFromCart, increaseCount, decreaseCount };\nexport default cartSlice.reducer;","map":{"version":3,"names":["createSlice","AsyncStorage","cartSlice","name","initialState","items","reducers","addToCart","state","action","item","payload","existingItemIndex","findIndex","i","id","push","_objectSpread","count","setItem","JSON","stringify","removeFromCart","filter","removeItem","increaseCount","map","decreaseCount","_cartSlice$actions","actions","reducer"],"sources":["D:/LTTBDT2/Example01/src/Cart/cartSlice.js"],"sourcesContent":["// cartSlice.js\r\nimport { createSlice } from \"@reduxjs/toolkit\";\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\n\r\nexport const cartSlice = createSlice({\r\n  name: \"cart\",\r\n  initialState: {\r\n    items: [],\r\n  },\r\n  reducers: {\r\n    addToCart: (state, action) => {\r\n      const { item } = action.payload;\r\n      const existingItemIndex = state.items.findIndex((i) => i.id === item.id);\r\n      if (existingItemIndex === -1) {\r\n        state.items.push({ ...item, count: 1 });\r\n      } else {\r\n        state.items[existingItemIndex].count++;\r\n      }\r\n\r\n      // Lưu giỏ hàng vào AsyncStorage\r\n      AsyncStorage.setItem('cart', JSON.stringify(state.items));\r\n    },\r\n    removeFromCart: (state, action) => {\r\n      state.items = state.items.filter((item) => item.id !== action.payload.id);\r\n\r\n      // Xóa giỏ hàng khỏi AsyncStorage\r\n      AsyncStorage.removeItem('cart');\r\n\r\n      // Lưu giỏ hàng mới vào AsyncStorage\r\n      AsyncStorage.setItem('cart', JSON.stringify(state.items));\r\n    },\r\n    increaseCount: (state, action) => {\r\n      state.items = state.items.map((item) => {\r\n        if (item.id === action.payload.id) {\r\n          item.count++;\r\n        }\r\n        return item;\r\n      });\r\n\r\n      // Lưu giỏ hàng mới vào AsyncStorage\r\n      AsyncStorage.setItem('cart', JSON.stringify(state.items));\r\n    },\r\n    decreaseCount: (state, action) => {\r\n      state.items = state.items.map((item) => {\r\n        if (item.id === action.payload.id && item.count > 1) {\r\n          item.count--;\r\n        }\r\n        return item;\r\n      });\r\n\r\n      // Lưu giỏ hàng mới vào AsyncStorage\r\n      AsyncStorage.setItem('cart', JSON.stringify(state.items));\r\n    },\r\n  },\r\n});\r\n\r\nexport const {\r\n  addToCart,\r\n  removeFromCart,\r\n  increaseCount,\r\n  decreaseCount\r\n} = cartSlice.actions;\r\nexport default cartSlice.reducer;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}